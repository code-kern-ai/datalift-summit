import streamlit as st
import numpy as np
import pandas as pd
from card_html import CARD_HTML

HTML = """<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html><body><table cellpadding="0" cellspacing="0" width="100%">\n<tr><td>\n<img height="1" width="1" alt="" style="display:block;" src="https://links.scrippsweb.com/a/1333/open/343518/2878371/9feed178c281a585a55e88ea01f5e4c55d01b114">\n<div align="center" style=\'font-size:8.0pt; font-family:"Arial","sans-serif"; color:#666666;margin-bottom:10px;display:block !important\'>\nIf you are having trouble viewing this email,\n<a style="border:0px" class="maro_no_record" href="https://links.scrippsweb.com/a/1333/preview/343518/2878371/9feed178c281a585a55e88ea01f5e4c55d01b114?message_id=IjI4YjIzNTAwLWFkMjUtMDEzYS1hYjFkLTQyMDEwYTgwMDA3MkBzY3JpcHBzd2ViLmNvbSI=">click here.</a>\n</div>\n</td></tr>\n<tr><td>\n<!-- current as of june 15 2018-->\n\n<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n  <title></title>\n\n  <style type="text/css">a,a:link,a:visited{text-decoration:none}a:hover{text-decoration:underline}h2,h2 a,h2 a:visited,h3,h3 a,h3 a:visited,h4,h5,h6,.t_cht{color:#000!important}p{margin-bottom:0}.ExternalClass p,.ExternalClass span,.ExternalClass font,.ExternalClass td{line-height:100%}.ExternalClass{width:100%}.yshortcuts a:visited{color:black;text-decoration:none!important;border-bottom:none!important;background:none!important}.yshortcuts a:visited{color:black;text-decoration:none!important;border-bottom:none!important;background:none!important}.yshortcuts a:hover{color:black;text-decoration:none!important;border-bottom:none!important;background:none!important}table td{padding:0;text-align:left}@media screen and (max-device-width:430px){table{width:100%!important}.hidden{display:none}td[class="emailcolsplit"]{width:100%!important;float:left!important;padding-left:0!important;max-width:430px!important}.mobile--center{text-align:center!important}td[class="emailcolsplit"] img{width:100%;max-width:100%!important;margin-bottom:5px!important}.anchor__tag{text-align:center!important}.margin__left{margin-left:65px}.top_padding{padding-top:40px}.padding_none--top{padding-top:0!important}.border__none--left{border-left:0}.header_mobile_text{font-size:16px!important}}@media screen and (max-width:430px){.hidden{display:none}td[class="emailcolsplit"]{width:100%!important;float:left!important;padding-left:0!important;max-width:430px!important}.mobile--center{text-align:center!important}td[class="emailcolsplit"] img{width:100%;max-width:100%!important;margin-bottom:5px!important}.anchor__tag{text-align:center!important}.margin__left{margin-left:65px}.top_padding{padding-top:40px}.padding_none--top{padding-top:0!important}.border__none--left{border-left:0}.header_mobile_text{font-size:16px!important}}</style>\n\n\n\n<table align="center" bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" class="portlet-layout" id="main-content" width="100%">\n  <tr>\n    <td align="center" bgcolor="#ECEBEB" style="background-color:#ECEBEB;">\n      <div align="center" style="width: 100%; max-width: 600px !important; margin: 0 auto;">\n        <table align="center" border="0" cellpadding="0" cellspacing="0">\n          <tr>\n            <td align="center" bgcolor="#ECEBEB" style="background-color: #ECEBEB" width="600">\n              <div class="portlet-column-only" id="column-1">\n                <div class="portlet-dropzone portlet-column-content" id="layout-column_column-1">\n\n                  <!-- Begin header -->\n                  <div class="portlet-boundary portlet-boundary_56_ portlet-static portlet-static-end portlet-borderless portlet-journal-content" id="p_p_id_56_INSTANCE_5NgWk3DHWcrX_">\n                    <span id="p_56_INSTANCE_5NgWk3DHWcrX"></span>\n                    <div class="portlet-body">\n                      <div class="portlet-borderless-container" style="">\n                        <div class="portlet-body">\n                          <div class="journal-content-article" id="article_10155_1242601623_1317138132_1.0">\n                            <table align="center" bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" style="width: 100%;" width="600">\n                              <tbody>\n                                <tr>\n                                  <td valign="top" width="20"> </td>\n                                  <td valign="top" width="560">\n                                    <table bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" style="width: 100%;">\n                                      <tbody>\n                                        <tr>\n                                          <td align="center" valign="top">\n                                            <table cellpadding="0" cellspacing="0">\n                                              <tbody>\n                                                <tr>\n                                                  <td>\n                                                    <table cellpadding="0" cellspacing="0" width="100%">\n                                                      <tr>\n                                                        <td height="10" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n                                                      </tr>\n                                                    </table>\n                                                    <table cellpadding="0" cellspacing="0" width="100%">\n                                                      <tr>\n                                                        <td height="70" style="vertical-align: middle" valign="middle">\n                                                          <table cellpadding="0" cellspacing="0">\n                                                            <tbody>\n                                                              <tr>\n                                                                <td align="left" valign="middle" width="150">\n<!-- nldomain: kivi.sps-web.lakana-sandbox.com -->\n                                                                <a href="" style="text-decoration: none; text-align: left"><img alt="wgba" border="0" height="70" src="http://assets.scrippsdigital.com/cms/images/color_schemes/wgba/newsletter-logo.png"></a>\n</td>\n                                                                <td align="left" valign="middle" width="20">\n                                                                  <table cellpadding="0" cellspacing="0" width="100%">\n                                                                    <tr>\n                                                                      <td height="40" style="text-align:left" valign="top">\n                                                                        <div class="" style="width: 100%; border-left: 1px solid #cccccc; height: 40px">\n                                                                           \n                                                                        </div>\n                                                                      </td>\n                                                                    </tr>\n                                                                  </table>\n                                                                </td>\n                                                                <td align="left" height="35" valign="middle" width="430">\n                                                                  <div class="header_mobile_text" style="font-family: helvetica, arial; color: #000000; height:35px; vertical-align: middle; font-size: 24px; line-height: 34px;">\n                                                                    Breaking News Alert\n                                                                  </div>\n                                                                </td>\n                                                              </tr>\n                                                            </tbody>\n                                                          </table>\n                                                        </td>\n                                                      </tr>\n                                                    </table>\n                                                    <table cellpadding="0" cellspacing="0" width="100%">\n                                                      <tr>\n                                                        <td height="10" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n                                                      </tr>\n                                                    </table>\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </td>\n                                        </tr>\n                                      </tbody>\n                                    </table>\n                                  </td>\n                                  <td valign="top" width="20"> </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <!-- End Header -->\n\n\n\n\n                  <div class="portlet-boundary portlet-boundary_56_ portlet-static portlet-static-end portlet-borderless portlet-journal-content" id="p_p_id_56_INSTANCE_1Jmb9KW6bDD7_">\n                    <span id="p_56_INSTANCE_1Jmb9KW6bDD7"></span>\n                    <div class="portlet-body">\n                      <div class="portlet-borderless-container" style="">\n                        <div class="portlet-body">\n                          <div class="journal-content-article" id="article_10155_1242601623_1317147052_1.0">\n                            <table bgcolor="#FFFFFF" cellpadding="0" cellspacing="0" style="width: 100%;" width="600">\n                              <tbody>\n                                <tr>\n                                  <td valign="top" width="20"> </td>\n                                  <td valign="top" width="560">\n                                    <table bgcolor="#FFFFFF" cellpadding="0" cellspacing="0" style="width: 100%;">\n                                      <tbody>\n                                        <tr>\n                                          <td valign="top">\n                                            <table cellpadding="0" cellspacing="0">\n                                              <tbody>\n                                                <tr>\n                                                  <td>\n                                                    <!-- this is  data -->\n                                                    <!-- 320 x 240 -->\n                                                    <!-- ShowingPromo: $showingPromo -->\n                                                    <!-- ItemIndex: $oneBasedIndex -->\n                                                    <!-- NationalTakeOverIndices: 1 -->\n                                                    <table cellpadding="0" cellspacing="0" width="100%">\n    <tr>\n    <td height="20" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n    </tr>\n</table>\n<table cellpadding="0" cellspacing="0" width="100%">\n    <tr>\n    <td align="left" class="emailcolsplit" style="text-align:left" valign="top" width="180"><a href="https://links.scrippsweb.com/a/1333/click/343518/2878371/eafef195cc96e18be11f61d5dcb958ba8343896a/9feed178c281a585a55e88ea01f5e4c55d01b114"><img alt="" border="0" height="120" src="https://ewscripps.brightspotcdn.com/dims4/default/37c790e/2147483647/strip/false/crop/751x563+125+0/resize/640x480!/quality/90/?url=https%3A%2F%2Fewscripps.brightspotcdn.com%2Fc0%2F61%2Fe08535774708bd9e098214102b8b%2Fap-20277607918430.jpg" style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; line-height: 18px; margin: 0; padding: 0; text-align: left; color: #000000; height: auto; line-height: 100%; outline: none; text-decoration: none; display: inline-block; vertical-align: middle; max-width:100%!important" width="160"></a></td>\n    <td align="left" class="emailcolsplit" style="text-align:left" valign="top" width="350">\n        <h3 style="font-weight: bold; margin: 0; padding: 0; font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; line-height: 18px; margin: 0; padding: 0; text-align: left; text-align: left; color: #222222; font-size: 18px; line-height: 24px;"><a href="https://links.scrippsweb.com/a/1333/click/343518/2878371/7c5fb0b54c9c1208ca1c13326856a259c1443e44/9feed178c281a585a55e88ea01f5e4c55d01b114" style="text-decoration: none; color: #222222;">US Supreme Court authenticates draft opinion in abortion case, launches investigation into leak</a></h3>\n        <table cellpadding="0" cellspacing="0" width="100%">\n        <tr>\n            <td height="5" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n        </tr>\n        </table>\n        <p style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; line-height: 18px; margin: 0; padding: 0; text-align: left; color: #767676; font-size: 14px; line-height: 18px; margin: 0; text-align: left"> U.S. Supreme Court Chief Justice John Roberts authenticated the draft opinion that was leaked to Politco. </p>\n<a href="https://links.scrippsweb.com/a/1333/click/343518/2878371/7c5fb0b54c9c1208ca1c13326856a259c1443e44/9feed178c281a585a55e88ea01f5e4c55d01b114" style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; line-height: 18px; margin: 0; padding: 0; text-align: left; text-align: left; font-size: 13px; color: #c1210b!important; font-weight: bold; display: inline; text-decoration: none!important; display: block;">READ MORE</a>\n    </td>\n    </tr>\n</table>\n<table cellpadding="0" cellspacing="0" width="100%">\n    <tr>\n    <td height="20" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n    </tr>\n</table>\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </td>\n                                        </tr>\n                                      </tbody>\n                                    </table>\n                                  </td>\n                                  <td valign="top" width="20"> </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                            <table cellpadding="0" cellspacing="0" width="100%">\n                              <tr>\n                                <td height="20" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n                              </tr>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n\n\n                  <!-- Begin ADVERTISING -->\n                  <div class="portlet-boundary portlet-boundary_56_ portlet-static portlet-static-end portlet-borderless portlet-journal-content" id="p_p_id_56_INSTANCE_Y8DxqEpe1GLm_">\n                    <span id="p_56_INSTANCE_Y8DxqEpe1GLm"></span>\n                    <div class="portlet-body">\n                      <div class="portlet-borderless-container" style="">\n                        <div class="portlet-body">\n                          <div class="journal-content-article" id="article_10155_1242601623_1242665496_1.0">\n                            <table bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" width="100%">\n                              <tr>\n                                <td style="text-align:left" valign="top">\n                                  <table cellpadding="0" cellspacing="0" width="100%">\n                                    <tr>\n                                      <td height="20" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n                                    </tr>\n                                  </table>\n                                  <center style="font-size: 8px; text-transform: uppercase; font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif;">\n                                    Advertisement\n                                  </center>\n                                  <table cellpadding="0" cellspacing="0" width="100%">\n                                    <tr>\n                                      <td align="left" style="text-align:left" valign="top" width="150"> </td>\n                                      <td align="left" style="text-align:left" valign="top" width="300"><a class="maro_no_record" href="https://pubads.g.doubleclick.net/gampad/jump?iu=/6088/ssp.wgba/newsletter/breakingalert&amp;sz=300x250&amp;tile=1&amp;c=0."><img alt="" border="0" src="https://pubads.g.doubleclick.net/gampad/ad?iu=/6088/ssp.wgba/newsletter/breakingalert&amp;sz=300x250&amp;tile=1&amp;c=0." style="max-width: 300px!important;" width="300"></a></td>\n                                      <td align="left" style="text-align:left" valign="top" width="150"> </td>\n                                    </tr>\n                                  </table>\n                                  <table cellpadding="0" cellspacing="0" width="100%">\n                                    <tr>\n                                      <td height="20" style="font-size: 1px; line-height: 0px; margin: 0; padding: 0;" valign="top"> </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <!-- / End ADVERTISING -->\n\n\n\n                </div>\n              </div>\n            </td>\n          </tr>\n        </table>\n      </div>\n    </td>\n  </tr>\n</table>\n\n\n</td></tr>\n<tr><td>\n\n\n<table align="center" bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" id="main-content" width="100%">\n    <tbody>\n        <tr>\n            <td align="center" bgcolor="#ECEBEB" style="background-color:#ECEBEB;">\n            <div align="center" style="width: 100%; max-width: 600px !important; margin: 0 auto;">\n            <table align="center" border="0" cellpadding="0" cellspacing="0">\n                <tbody>\n                    <tr>\n                        <td align="center" bgcolor="#ECEBEB" style="background-color: #ECEBEB" width="600">\n                        <table align="center" bgcolor="#ECEBEB" cellpadding="0" cellspacing="0" width="600">\n                            <tbody>\n                                <tr>\n                                    <td bgcolor="#ECEBEB" style="background-color: #ECEBEB">\n                                    <p style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; margin: 0; padding: 0; line-height: 15px; font-size: 12px; text-align: center; margin-bottom: 12px;">To ensure delivery to your inbox, please add <a href="mailto:WGBA@newsletters.scrippsweb.com" style="color: #888888;">WGBA@newsletters.scrippsweb.com</a> to your address book.</p>\n\n                                    <p style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; font-size: 14px; color: #767676; margin: 0; padding: 0; line-height: 15px; font-size: 12px; text-align: center; margin-bottom: 12px;">To select which newsletters you would like to receive, <a href="http://www.nbc26.com/account/manage-email-preferences?email=dataliftworkshop@protonmail.com&amp;uref=1524822932110707528" style="text-decoration: underline; color:#a4a4a4;">Manage Subscriptions</a>. If you no longer wish to receive this newsletter, <a href="https://links.scrippsweb.com/a/1333/list_unsubscribe_full/343518/2878371/9feed178c281a585a55e88ea01f5e4c55d01b114" style="color: #888888; text-decoration: underline;" target="_blank">Unsubscribe</a>. If you no longer wish to receive any communication, <a href="http://www.nbc26.com/account/unsubscribe-all-newsletters?email=dataliftworkshop@protonmail.com&amp;uref=1524822932110707528&amp;lists=all&amp;type=unsubscribe" style="color: #888888; text-decoration: underline;">Unsubscribe From All</a>. If you have questions or need assistance, <a href="http://www.nbc26.com/about-us/contact-us" style="text-decoration: underline; color: #a4a4a4">Contact Us</a>.</p>\n\n                                    <p style="font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; color: #767676; line-height: 18px; text-align: center; line-height: 15px; font-size: 12px; margin: 0 0;">©  2022 1391 North Road Green Bay, WI 54313 <a href="http://www.nbc26.com/privacy-policy" style="text-decoration: underline; color:#a4a4a4">Privacy Policy</a></p>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            </div>\n            </td>\n        </tr>\n    </tbody>\n</table>\n</td></tr>\n</table></body></html>"""

def local_css(file_name):
    with open(file_name) as f:
        st.markdown(f'<style>{f.read()}</style>', unsafe_allow_html=True)

local_css("streamlit.css")

st.header("Newsletter Dashboard")

@st.cache()
def get_random_data():
    return np.random.randn(50, 3)

@st.cache()
def read_dataframe(path, sep=","):
    df = pd.read_csv(path, sep=sep)
    df = df[["subject", "text"]]
    return df

col1, col2 = st.columns(2)

# Left-hand side consists of the filtering options and newsletter browser
with col1:
    # Filtering options
    with st.container():
        # st.write("Filtering options")
       
        # TODO add callback function
        topic_options = st.multiselect(
            'Topic selection',
            ['Stock market', 'AI', 'Ethics'],
            [])

        # TODO add callback function
        newsletter_options = st.multiselect(
            'Newsletter selection',
            ['TLDR Crypto', 'Deeplearning Weekly', 'NBC26'],
            [])

    # Newsletter Browser
    with st.container():
        # st.write("Newsletter Story Browser")
        # st.dataframe(read_dataframe("real_mails_20_05_22.csv"))
        
        st.markdown(CARD_HTML, unsafe_allow_html=True)


# Right-hand side consists of the pick of the day and the full HTML view of the selected newsletter
with col2:
    # Pick of the day
    with st.container():
        # st.write("Pick of the day")
        st.markdown("**This is a headline.**")
        st.markdown("And this is the corresponding Article to it. Lorem Ipsum")

    with st.container():
        # st.info("Test")
        st.components.v1.html(HTML, width=None, height=512, scrolling=True)

        